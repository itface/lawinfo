<!DOCTYPE html>
<html>
	<head>
        <META name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=no">
        <META http-equiv="Content-Type" content="text/html; charset=utf-8">
        <META http-equiv="cache-control" content="no-cache">
        <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
        <META HTTP-EQUIV="Expires" CONTENT="0">
        <!-- 新 Bootstrap 核心 CSS 文件 -->
        <link rel="stylesheet" href="/static/bootstrap/3.3.5/css/bootstrap.min.css">

        <!-- 可选的Bootstrap主题文件（一般不用引入） -->
        <link rel="stylesheet" href="/static/bootstrap/3.3.5/css/bootstrap-theme.min.css">
        <link rel="stylesheet" href="/static/common/common.css">
        <link rel="stylesheet" href="/static/bootstrap-datetimepicker/css/bootstrap-datetimepicker.css">


        <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
        <script src="/static/jquery/1.11.3/jquery.min.js"></script>

        <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
        <script src="/static/bootstrap/3.3.5/js/bootstrap.min.js"></script>
        <script src="/static/bootstrap-treeview/bootstrap-treeview.js"></script>
        <script src="/static/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
        <script src="/static/bootstrap-datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
        <script src="/static/front/user.js"></script>
        <script src="/static/front/caseinfo.js"></script>
        <script src="/static/front/caseprogress.js"></script>
        <script src="/static/front/chart.js"></script>
        <script src="/static/front/caseinfo_exelawyer.js"></script>
        <script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>

	</head>
	<body>
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="col-xs-12" style="text-align: center">
                <h3>
                    管理系统
                </h3>
            </div>
        </div>
        <div style="text-align: center;position: absolute;top:0px;right: 0px">
            <ul class="nav nav-tabs">
                <li class="">
                    <a href="javascript:void(0)">您好，$!loginusername</a>
                </li>
                <li class="dropdown pull-right">
                    <a href="#" data-toggle="dropdown" class="dropdown-toggle">设置<strong class="caret"></strong></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="/logout">离开</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
        <div class="row-fluid">
            <div class="row" >
                <div class="col-xs-3" id="nav-panel">
                    <div id="nav-tree"></div>
                </div>
                <div class="col-xs-9" id="content-pane" style="background: #fff">
                        <div class="row toolbar">
                            <div class="col-xs-6">
                                <button type="button" class="btn btn-primary" id="btn-caseinfo-add" actionid="front-caseinfo-add-btn" style="display: none">
                                    创建案件
                                </button>
                                #*<button type="button" class="btn btn-primary" id="btn-caseinfo-progress-add" actionid="front-case-progress-add-btn" style="display: none">
                                    添加案件进度
                                </button>*#
                            </div>
                            <div class="col-xs-4">
                                <input type="text" class="form-control" placeholder="搜索" style="display:none;"/>
                            </div>
                            #*<div class="col-xs-1">
                                <span>您好，高大山</span>
                            </div>
                            <div class="col-xs-1" style="text-align: center">
                                <ul class="nav nav-tabs">
                                    <li class="dropdown pull-right">
                                        <a href="#" data-toggle="dropdown" class="dropdown-toggle">设置<strong class="caret"></strong></a>
                                        <ul class="dropdown-menu">
                                            <li>
                                                <a href="/logout">离开</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </div>*#
                        </div>
                        <div class="row">
                            <div class="span12">
                                <ul class="nav nav-tabs" id="record-nav">
                                    <li class="active">
                                        <a href="#case-doing" data-toggle="tab" id="case-doing-tab" actionid="front-case-doing-list" style="display: block">在办</a>
                                    </li>
                                    <li>
                                        <a href="#case-doing" data-toggle="tab" id="case-ed-tab" actionid="front-case-ed-list" style="display: block">已办</a>
                                    </li>
                                    <li>
                                        <a href="#case-doing" data-toggle="tab" id="case-all-tab" actionid="front-case-all-list" style="display: block">所有</a>
                                    </li>
                                    <li>
                                        <a href="#case-report" data-toggle="tab" id="case-report-tab" actionid="front-case-report-list" style="display: none">统计</a>
                                    </li>
                                </ul>
                                <div id="caseTabContent" class="tab-content">
                                    <div class="tab-pane fade in active" id="case-doing">
                                        <table class="table table-hover" id="caseinfo-list">
                                            <thead>
                                            <tr>
                                                <th>&nbsp;</th>
                                                <th>序号</th>
                                                <th>创建人</th>
                                                <th>创建时间</th>
                                                <th>摘要</th>
                                                <th>&nbsp;</th>
                                            </tr>
                                            </thead>
                                            <tbody>

                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="tab-pane fade" id="case-report">
                                        <div class="row-fluid">
                                            <div class="row">
                                                <div class="col-xs-12">
                                                    <div id="chart1" style="height:400px;"></div>
                                                </div>
                                                <div class="col-xs-12">
                                                    <div id="chart2" style="height:400px;"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!---------------------------通用conform窗口 begin--------------------------------->
    <div class="modal fade" id="confirmModal" tabindex="-1" role="dialog"
         aria-labelledby="confirmModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-hidden="true">×
                    </button>
                    <h4 class="modal-title" id="confirmModalLabel">
                        警告
                    </h4>
                </div>
                <div class="modal-body has-error">
                    <label class="control-label msg-label" for="inputError">
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default btn-cancel"
                            data-dismiss="modal">取消
                    </button>
                    <button type="button" class="btn btn-default btn-confirm"
                            data-dismiss="modal">确认
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!---------------------------通用conform窗口 end--------------------------------->
    <!---------------------------通用提示窗口 begin--------------------------------->
    <div class="modal fade" id="msgModal" tabindex="-1" role="dialog"
         aria-labelledby="msgModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal"
                            aria-hidden="true">×
                    </button>
                    <h4 class="modal-title" id="msgModalLabel">
                        提示
                    </h4>
                </div>
                <div class="modal-body has-error">
                    <label class="control-label msg-label" for="inputError">
                    </label>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default"
                            data-dismiss="modal">关闭
                    </button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>
    <!---------------------------通用提示窗口 end--------------------------------->
    <div id="caseinfo-exelawyer-modal" class="modal fade" >
        <div class="modal-dialog pregress-dialog" style="width: 1000px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">添加执行律师</h4>
                </div>
                <div class="modal-body">
                    <form role="form" id="caseinfo-exelawyer-form">
                        <div class="row form-group">
                            <div class="col-xs-4">执行案号</div>
                            <div class="col-xs-8"><input id="exeajbh" class="form-control" type="text"/></div>
                        </div>
                        <div class="row form-group">
                            <div class="col-xs-4">执行律师</div>
                            <div class="col-xs-8">
                                <input id="exelawyers" class="form-control" type="text" readonly/>
                                <input id="exelawyerids" class="form-control" type="text" style="display: none"/>
                                <div id="caseinfo-exelawyer-tree">
                                </div>
                            </div>
                        </div>
                        <div class="row has-error" style="display: none">
                            <div class="col-xs-4">
                            </div>
                            <div class="col-xs-6">
                                <label class="control-label error-label" for="inputError">
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <a type="button" class="btn btn-primary btn-lg btn-block submit">提交</a>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
    <div id="caseinfo-progress-modal" class="modal fade" >
        <div class="modal-dialog pregress-dialog" style="width: 1000px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">进度明细:<span id="casetitle"></span></h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <ul class="nav nav-tabs">
                            <li class="active">
                                <a href="#progress-query" data-toggle="tab" id="progress-query-tab" actionid="caseinfo-progress-query-tab">查看</a>
                            </li>
                            <li>
                                <a href="#progress-edit" data-toggle="tab" id="progress-edit-tab" actionid="caseinfo-progress-edit-tab">编辑</a>
                            </li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane fade in active" id="progress-query">
                                <div>
                                    <table class="table table-hover">
                                        <thead>
                                        <tr>
                                            <th>序号</th>
                                            <th>提交人</th>
                                            <th>提交时间</th>
                                            <th>内容</th>
                                            <th>下一步计划</th>
                                        </tr>
                                        </thead>
                                        <tbody>

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="progress-edit">
                                <div class="row">
                                    <div class="col-xs-4">
                                        <div id="caseinfo-progress-tree"></div>
                                    </div>
                                    <div class="col-xs-8">
                                        <form role="form" id="caseinfo-progress-form" style="display: none">
                                        #*<div class="row form-group">
                                            <div class="col-xs-12">
                                                <button type="button" class="close" style="font-size: 30px">+</button>
                                            </div>
                                        </div>*#
                                            <div id="caseinfo-progress-list">
                                            </div>
                                            <div class="row form-group" id="add-form">
                                            </div>
                                            <div class="row has-error" style="display: none">
                                                <div class="col-xs-4">
                                                </div>
                                                <div class="col-xs-6">
                                                    <label class="control-label error-label" for="inputError">
                                                    </label>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <div id="caseinfo-modal" class="modal fade">
        <div class="modal-dialog pregress-dialog" style="width: 800px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title">新增案件</h4>
                </div>
                <div class="modal-body">
                    <form role="form" id="caseinfo-form">
                        <div class="case-form">
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>案件所属机构:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="caseorgid" class="form-control" type="text"  style="display: none"/>
                                    <input id="caseorgname" class="form-control" type="text" disabled/>
                                    <div id="progress-org-tree"></div>
                                #*<select name="bankid" id="bankid" class="form-control">
                                    <option value="1">中国工商银行中关村支行</option>
                                    <option value="2">招商银行海淀分行</option>
                                </select>*#
                                </div>
                                <div class="col-xs-2">
                                    <label>案件是否完结:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="casetype"  type="checkbox"/>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>机构联络人:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="contacts" class="form-control" type="text" disabled/>
                                    <input id="contactids" class="form-control" type="text" style="display: none"/>
                                    <div id="progress-user-tree"></div>
                                </div>
                                <div class="col-xs-2">
                                    <label>诉讼律师:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="sslawyers" class="form-control" type="text" disabled/>
                                    <input id="sslawyerids" class="form-control" type="text" style="display: none"/>
                                    <div id="progress-lawyer-tree"></div>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>债务人信息:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="debtorinfo" type="text" class="form-control" placeholder="债务人信息"/>
                                </div>
                                <div class="col-xs-2">
                                    <label>是否与律所关联:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="iscreditorrelated"  type="checkbox"/>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>债务人财产状况:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea  id="debtorpropertyinfo" class="form-control" rows="3"></textarea>
                                </div>
                                <div class="col-xs-2">
                                    <label>案由:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea  id="ay" rows="3" class="form-control"></textarea>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>债权本金:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="zqbj" type="text" class="form-control"/>
                                </div>
                                <div class="col-xs-2">
                                    <label>债权到期日期:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="zqdqr" type="text" class="form-control" readonly/>
                                </div>
                            </div>

                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>担保人信息:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="guarantorinfo" type="text" class="form-control"/>
                                </div>
                                <div class="col-xs-2">
                                    <label>是否与律所关联:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="isguarantorrelated" type="checkbox"/>
                                </div>

                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>担保方式:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea id="guaranteetype" row="3" class="form-control"></textarea>
                                </div>
                                <div class="col-xs-2">
                                    <label>担保人财产状况:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea id="guarantorpropertyinfo" row="3" class="form-control"></textarea>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>抵押物信息:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea id="pawninfo" row="3" class="form-control"></textarea>
                                </div>
                                <div class="col-xs-2">
                                    <label>抵押物评估价值:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="pawnvalue" type="text" class="form-control"/>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>案件程序:</label>
                                </div>
                                <div class="col-xs-4">
                                    <textarea id="caseprocedure" row="3" class="form-control"></textarea>
                                </div>
                                <div class="col-xs-2">
                                    <label>律师费总额:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="totalprice" type="text" class="form-control"/>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-xs-2">
                                    <label>受理法院:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="court" type="text" class="form-control"/>
                                </div>
                                <div class="col-xs-2">
                                    <label>承办法官:</label>
                                </div>
                                <div class="col-xs-4">
                                    <input id="judge" type="text" class="form-control"/>
                                </div>
                            </div>
                            #*<div class="row form-group">
                                <div class="col-xs-2">
                                    <label>诉讼案号:</label>
                                </div>
                                <div class="col-xs-10">
                                    <input id="ssajbh" class="form-control" type="text"/>
                                </div>
                            </div>*#
                            <div class="row has-error" style="display: none">
                                <div class="col-xs-4">
                                </div>
                                <div class="col-xs-6">
                                    <label class="control-label error-label" for="inputError">
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <a type="button" class="btn btn-primary btn-lg btn-block submit">提交</a>
                        </div>
                    </form>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div>

    <script type="text/javascript">
            function mainAlert(msg){
                jQuery('#msgModal .msg-label').text(msg);
                jQuery('#msgModal').modal('show');
            }
            function mainConfirm(msg,confirmCallback){
                jQuery('#confirmModal .msg-label').text(msg);
                jQuery('#confirmModal .btn-confirm').unbind("click")
                jQuery('#confirmModal .btn-confirm').on('click',confirmCallback);
                jQuery('#confirmModal').modal('show');
            }
            var frontPage = {
                init: function () {
                    jQuery('#btn-caseinfo-add').on('click', function (e) {
                        /*$('#btn-caseinfo-progress-add').removeClass("btn-primary").addClass("btn-default");
                        $('#btn-caseinfo-add').removeClass("btn-default").addClass("btn-primary");*/
                        jQuery('#caseinfo-modal').modal({backdrop: 'static', keyboard: false}).modal('show');
                    });
                    jQuery('#btn-caseinfo-progress-add').on('click', function (e) {
                        /*$('#btn-caseinfo-add').removeClass("btn-primary").addClass("btn-default");
                        $('#btn-caseinfo-progress-add').removeClass("btn-default").addClass("btn-primary");*/
//                        jQuery('#caseinfo-progress-modal').modal({backdrop: 'static', keyboard: false}).modal('show');
                    });
                    $('#zqdqr').datetimepicker({
                        format: 'yyyy-mm-dd',
                        minView: "month",
                        autoclose:true
                    });
                }
            };
            var currentTabType=1;
            var loginuser="$!loginuser";
            var currentUser=loginuser;
            var canRemoveCase = false;
            frontPage.init();
            user.init();
            caseinfo.init();
            jQuery('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
                // 获取已激活的标签页的名称
                var currentTabId = jQuery(e.target).attr("id");
                if (currentTabId=='case-doing-tab') {
                    currentTabType=1;
                    caseinfo.init();
                }else if (currentTabId == 'case-ed-tab') {
                    currentTabType=2;
                    caseinfo.init();
                }else if (currentTabId == 'case-all-tab') {
                    currentTabType=0;
                    caseinfo.init();
                }else if (currentTabId == 'case-report-tab') {
                    currentTabType=2;//查询所有已经结束的案子
                    chart.init();
                }
            });
            var actionList = "$!actionList";
            if (actionList) {
                var actionArr = actionList.split(",");
                for (var i=0;i<actionArr.length;i++) {
                    jQuery("[actionid='"+actionArr[i]+"']").show();
                    if (actionArr[i]=='front-case-remove') {
                        canRemoveCase = true;
                    }
                }
            }
            $('#caseinfo-progress-modal').on('shown.bs.modal', function () {
                jQuery('#caseinfo-progress-form').hide();
                caseprogress.init();
            });
            $('#caseinfo-exelawyer-modal').on('shown.bs.modal', function () {
                exeLawyer.init();
            });

        </script>
	</body>
</html>